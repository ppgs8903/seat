{"version":3,"sources":["../src/Event.js"],"names":[],"mappings":";;;;;;;AAIA,IAAI,KAAK,GAAG,EAAE,CAAC;;AAEf,AAAC,CAAA,UAAU,CAAC,EAAE;;AAEZ,MAAI,MAAM,GAAG,EAAE;;AACb,QAAM,GAAG,CAAC,CAAC,CAAC;;AAEd,GAAC,CAAC,OAAO,GAAG,UAAU,KAAK,EAAE,IAAI,EAAE;AACjC,QAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;AAClB,aAAO,KAAK,CAAC;KACd;AACD,cAAU,CAAC,YAAY;AACrB,UAAI,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC;UAC7B,GAAG,GAAG,WAAW,GAAG,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;;AAE7C,aAAO,GAAG,EAAE,EAAE;AACZ,mBAAW,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;OACpC;KACF,EAAE,CAAC,CAAC,CAAC;AACN,WAAO,IAAI,CAAC;GAEb,CAAC;;;AAGF,GAAC,CAAC,SAAS,GAAG,UAAU,KAAK,EAAE,IAAI,EAAE;AACnC,QAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;AAClB,YAAM,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;KACpB;AACD,QAAI,KAAK,GAAG,CAAC,EAAE,MAAM,CAAA,CAAE,QAAQ,EAAE,CAAC;AAClC,UAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC;AACjB,WAAK,EAAE,KAAK;AACZ,UAAI,EAAE,IAAI;KACX,CAAC,CAAC;AACH,WAAO,KAAK,CAAC;GACd,CAAC;;;AAGF,GAAC,CAAC,WAAW,GAAG,UAAU,KAAK,EAAE;AAC/B,SAAK,IAAI,CAAC,IAAI,MAAM,EAAE;AACpB,UAAI,MAAM,CAAC,CAAC,CAAC,EAAE;AACb,aAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AAChD,cAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,KAAK,EAAE;AAChC,kBAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACvB,mBAAO,KAAK,CAAC;WACd;SACF;OACF;KACF;AACD,WAAO,KAAK,CAAC;GACd,CAAC;CAEH,CAAA,CAAC,KAAK,CAAC,CAAE;;qBAEK,KAAK","file":"Event.js","sourcesContent":["/**\r\n * Created by jason on 2016/6/10.\r\n */\r\n\r\nlet Event = {};\r\n\r\n(function (q) {\r\n\r\n  var topics = {}, // 回调函数存放的数组\r\n    subUid = -1;\r\n  // 发布方法\r\n  q.publish = function (topic, args) {\r\n    if (!topics[topic]) {\r\n      return false;\r\n    }\r\n    setTimeout(function () {\r\n      var subscribers = topics[topic],\r\n        len = subscribers ? subscribers.length : 0;\r\n\r\n      while (len--) {\r\n        subscribers[len].func(topic, args);\r\n      }\r\n    }, 0);\r\n    return true;\r\n\r\n  };\r\n\r\n  //订阅方法\r\n  q.subscribe = function (topic, func) {\r\n    if (!topics[topic]) {\r\n      topics[topic] = [];\r\n    }\r\n    var token = (++subUid).toString();\r\n    topics[topic].push({\r\n      token: token,\r\n      func: func\r\n    });\r\n    return token;\r\n  };\r\n\r\n  //退订方法\r\n  q.unsubscribe = function (token) {\r\n    for (var m in topics) {\r\n      if (topics[m]) {\r\n        for (var i = 0, j = topics[m].length; i < j; i++) {\r\n          if (topics[m][i].token === token) {\r\n            topics[m].splice(i, 1);\r\n            return token;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n}(Event));\r\n\r\nexport default Event;\r\n"]}